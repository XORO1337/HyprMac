# macOS Tahoe Hyprland Configuration
# Pixel-perfect macOS replica for Arch Linux

# ╔══════════════════════════════════════════════════════════════╗
# ║                    MONITOR & DISPLAY                        ║
# ╚══════════════════════════════════════════════════════════════╝

# Monitor configuration
monitor=,preferred,auto,1

# For high DPI displays (uncomment and adjust as needed)
# monitor=,preferred,auto,2
# exec-once = gsettings set org.gnome.desktop.interface scaling-factor 2

# ╔══════════════════════════════════════════════════════════════╗
# ║                     EXECUTION COMMANDS                        ║
# ╚══════════════════════════════════════════════════════════════╝

# Start wallpaper engine
exec-once = swww init
exec-once = swww img ~/Documents/Wallpapers/macos-tahoe-default.jpg

# Start waybar (top bar)
exec-once = waybar

# Start AGS widgets
exec-once = ags &

# Start notification daemon
exec-once = dunst

# Start polkit agent
exec-once = /usr/lib/polkit-kde-authentication-agent-1

# Start network applet
exec-once = nm-applet --indicator

# Start bluetooth applet
exec-once = blueman-applet

# Start clipboard manager
exec-once = wl-paste --type text --watch wl-copy --clear --type text
exec-once = wl-paste --type image --watch wl-copy --clear --type image

# Start screen locker
exec-once = hypridle

# Start auto-start applications
exec-once = [workspace 1 silent] firefox
exec-once = [workspace 2 silent] code

# ╔══════════════════════════════════════════════════════════════╗
# ║                     ENVIRONMENT VARIABLES                     ║
# ╚══════════════════════════════════════════════════════════════╝

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORM,wayland
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = CLUTTER_BACKEND,wayland
env = GDK_BACKEND,wayland
env = SDL_VIDEODRIVER,wayland
env = _JAVA_AWT_WM_NONREPARENTING,1
env = MOZ_ENABLE_WAYLAND,1
env = MOZ_DBUS_REMOTE,1
env = ELECTRON_OZONE_PLATFORM_HINT,auto

# macOS-specific environment
env = GTK_THEME,macOS-Tahoe
env = ICON_THEME,macOS-Tahoe
env = CURSOR_THEME,macOS
env = FONT_NAME,"SF Pro Display 11"
env = MONOSPACE_FONT_NAME,"SF Mono 11"

# ╔══════════════════════════════════════════════════════════════╗
# ║                        GENERAL SETTINGS                       ║
# ╚══════════════════════════════════════════════════════════════╝

# General settings
general {
    gaps_in = 8
    gaps_out = 12
    border_size = 0
    no_border_on_floating = false
    col.active_border = rgba(0078d4ff)
    col.inactive_border = rgba(595959ff)
    layout = dwindle
    no_cursor_warps = true
    resize_on_border = false
    extend_border_grab_area = 15
    hover_icon_on_border = false
}

# ╔══════════════════════════════════════════════════════════════╗
# ║                        DECORATION                             ║
# ╚══════════════════════════════════════════════════════════════╝

decoration {
    rounding = 12
    blur {
        enabled = true
        size = 8
        passes = 2
        ignore_opacity = true
        new_optimizations = true
        xray = false
        special = true
        popups = true
        popups_ignorealpha = 0.6
        contrasts = 1.2
        brightness = 1.0
        vibrancy = 0.4
        vibrancy_dark = 0.2
    }
    
    drop_shadow = true
    shadow_range = 20
    shadow_render_power = 4
    shadow_ignore_window = true
    shadow_offset = 0 4
    shadow_scale = 1.0
    col.shadow = rgba(00000080)
    col.shadow_inactive = rgba(00000040)
}

# ╔══════════════════════════════════════════════════════════════╗
# ║                         ANIMATIONS                            ║
# ╚══════════════════════════════════════════════════════════════╝

# macOS-style animations
animations {
    enabled = true
    
    # Window open animation (Scale effect like macOS)
    animation = windows, 1, 6, default, slide
    animation = windowsIn, 1, 6, default, slide
    animation = windowsOut, 1, 5, default, slide
    
    # Window movement animation (Wobbly windows)
    animation = windowsMove, 1, 5, default, slide
    
    # Window minimize animation (Genie effect simulation)
    animation = windowsIn, 1, 4, default, popin 80%
    animation = windowsOut, 1, 4, default, popin 80%
    
    # Border animation
    animation = border, 1, 10, default
    
    # Fade animation
    animation = fade, 1, 10, default
    animation = fadeIn, 1, 10, default
    animation = fadeOut, 1, 10, default
    
    # Workspace animation
    animation = workspaces, 1, 5, default, slidevert
    
    # Special workspace animation
    animation = specialWorkspace, 1, 3, default, slidevert
    
    # Layer animation (for waybar and widgets)
    animation = layers, 1, 5, default, slide
    animation = layersIn, 1, 5, default, slide
    animation = layersOut, 1, 4, default, slide
    
    # Bezier curves for smooth animations
    bezier = default, 0.25, 0.46, 0.45, 0.94
    bezier = easeOutQuart, 0.25, 1, 0.5, 1
    bezier = easeInOutCubic, 0.65, 0, 0.35, 1
    bezier = material, 0.4, 0.0, 0.2, 1
    bezier = macos, 0.25, 0.46, 0.45, 0.94
}

# ╔══════════════════════════════════════════════════════════════╗
# ║                         INPUT                                 ║
# ╚══════════════════════════════════════════════════════════════╝

input {
    kb_layout = us
    kb_variant = 
    kb_model = 
    kb_options = 
    kb_rules = 
    
    follow_mouse = 1
    mouse_refocus = false
    
    sensitivity = 0
    accel_profile = 
    
    touchpad {
        natural_scroll = true
        disable_while_typing = true
        clickfinger_behavior = true
        middle_button_emulation = false
        tap_button_map = lrm
        scroll_factor = 1.0
    }
}

# ╔══════════════════════════════════════════════════════════════╗
# ║                     GESTURES & HOT CORNERS                    ║
# ╚══════════════════════════════════════════════════════════════╝

gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
    workspace_swipe_distance = 300
    workspace_swipe_invert = true
    workspace_swipe_min_speed_to_force = 30
    workspace_swipe_cancel_ratio = 0.5
    workspace_swipe_create_new = true
    workspace_swipe_forever = false
}

# Hot corners configuration
bindm = ,mouse:200,movewindow
bindm = ,mouse:201,resizewindow

# ╔══════════════════════════════════════════════════════════════╗
# ║                     WINDOW RULES                              ║
# ╚══════════════════════════════════════════════════════════════╝

# Window rules for macOS-like behavior
windowrule = float, ^(floating)$
windowrule = tile, ^(tiling)$
windowrule = center, ^(dialog)$
windowrule = center, ^(popup)$
windowrule = center, ^(notification)$
windowrule = opacity 0.9, ^(terminal)$
windowrule = opacity 0.95, ^(code)$
windowrule = opacity 0.95, ^(firefox)$
windowrule = opacity 0.95, ^(chromium)$

# Blur rules for transparency effects
windowrule = blur, ^(terminal)$
windowrule = blur, ^(nautilus)$
windowrule = blur, ^(thunar)$
windowrule = blur, ^(code)$

# Special workspace rules
windowrule = workspace special, ^(spotify)$
windowrule = workspace special, ^(discord)$

# Size and position rules
windowrule = size 60% 60%, ^(dialog)$
windowrule = size 50% 50%, ^(popup)$
windowrule = center, ^(floating)$

# ╔══════════════════════════════════════════════════════════════╗
# ║                     LAYER RULES                               ║
# ╚══════════════════════════════════════════════════════════════╝

# Layer rules for widgets and overlays
layerrule = blur, waybar
layerrule = blur, ags
layerrule = blur, notifications
layerrule = blur, control-center

# ╔══════════════════════════════════════════════════════════════╗
# ║                    KEYBINDINGS                                ║
# ╚══════════════════════════════════════════════════════════════╝

# macOS-style keybindings
bind = SUPER, Q, exec, wofi --show drun --style ~/.config/wofi/style.css
bind = SUPER, SPACE, exec, wofi --show run --style ~/.config/wofi/style.css

# Window management
bind = SUPER, Return, exec, alacritty
bind = SUPER, N, exec, nautilus
bind = SUPER, T, exec, thunar

# macOS-style window controls
bind = SUPER, W, killactive,
bind = SUPER, M, fullscreen,
bind = SUPER, F, togglefloating,
bind = SUPER, H, pseudotile,

# Window switching (Cmd+Tab like macOS)
bind = SUPER, Tab, cyclenext,
bind = SUPER_SHIFT, Tab, cyclenext, prev

# Workspace navigation
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move windows to workspaces
bind = SUPER_SHIFT, 1, movetoworkspace, 1
bind = SUPER_SHIFT, 2, movetoworkspace, 2
bind = SUPER_SHIFT, 3, movetoworkspace, 3
bind = SUPER_SHIFT, 4, movetoworkspace, 4
bind = SUPER_SHIFT, 5, movetoworkspace, 5
bind = SUPER_SHIFT, 6, movetoworkspace, 6
bind = SUPER_SHIFT, 7, movetoworkspace, 7
bind = SUPER_SHIFT, 8, movetoworkspace, 8
bind = SUPER_SHIFT, 9, movetoworkspace, 9
bind = SUPER_SHIFT, 0, movetoworkspace, 10

# Special workspace
bind = SUPER, S, togglespecialworkspace, music
bind = SUPER_SHIFT, S, movetoworkspace, special

# Window movement (Vim-style)
bind = SUPER, H, movewindow, l
bind = SUPER, J, movewindow, d
bind = SUPER, K, movewindow, u
bind = SUPER, L, movewindow, r

# Window resizing
bind = SUPER_SHIFT, H, resizewindow, -50 0
bind = SUPER_SHIFT, J, resizewindow, 0 50
bind = SUPER_SHIFT, K, resizewindow, 0 -50
bind = SUPER_SHIFT, L, resizewindow, 50 0

# Application shortcuts
bind = SUPER, E, exec, nautilus
bind = SUPER, C, exec, code
bind = SUPER, B, exec, firefox
bind = SUPER, P, exec, wofi --show power-menu --style ~/.config/wofi/power-menu.css

# System controls
bind = SUPER, L, exec, hyprlock
bind = SUPER, Escape, exec, wofi --show power-menu
bind = SUPER_SHIFT, Escape, exit

# Screenshots
bind = SUPER, Print, exec, grimblast save screen
bind = SUPER_SHIFT, Print, exec, grimblast save active
bind = SUPER_CTRL, Print, exec, grimblast save area

# Clipboard
bind = SUPER, V, exec, wl-paste --primary | wl-copy
bind = SUPER_SHIFT, V, exec, wl-paste | wl-copy --primary

# Volume controls
bind = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

# Media controls
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioPause, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous

# Brightness controls
bind = , XF86MonBrightnessUp, exec, brightnessctl set 5%+
bind = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# ╔══════════════════════════════════════════════════════════════╗
# ║                     MOUSE BINDINGS                            ║
# ╚══════════════════════════════════════════════════════════════╝

# Mouse bindings
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# ╔══════════════════════════════════════════════════════════════╗
# ║                    DISPATCHERS                                ║
# ╚══════════════════════════════════════════════════════════════╝

# Custom dispatchers for macOS features
dispatcher = [[float]]
dispatcher = [[tile]]
dispatcher = [[center]]
dispatcher = [[mission_control]]
dispatcher = [[app_expose]]
dispatcher = [[launchpad]]
dispatcher = [[spotlight]]
dispatcher = [[control_center]]
dispatcher = [[notifications]]

# ╔══════════════════════════════════════════════════════════════╗
# ║                    MISCELLANEOUS                              ║
# ╚══════════════════════════════════════════════════════════════╝

# Miscellaneous settings
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    vfr = true
    vrr = 0
    mouse_move_enables_dpms = false
    key_press_enables_dpms = false
    disable_autoreload = false
}

# ╔══════════════════════════════════════════════════════════════╗
# ║                    DEBUGGING                                  ║
# ╚══════════════════════════════════════════════════════════════╝

# Debug settings (uncomment for debugging)
# debug {
#     disable_logs = false
#     enable_stdout_logs = true
#     damage_tracking = 0
#     disable_time = false
# }

# ╔══════════════════════════════════════════════════════════════╗
# ║                    PERFORMANCE                                ║
# ╚══════════════════════════════════════════════════════════════╝

# Performance optimizations
render {
    explicit_sync = true
    explicit_sync_kms = true
    direct_scanout = true
    damage_tracking = 2
    damage_blink = false
    force_introspection = 2
}

# ╔══════════════════════════════════════════════════════════════╗
# ║                    END OF CONFIGURATION                       ║
# ╚══════════════════════════════════════════════════════════════╝