# =============================================
# General
# =============================================
general {
    gaps_in = 10
    gaps_out = 20
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    layout = dwindle
    allow_tearing = false
}

# =============================================
# Input (touchpad & keyboard)
# =============================================
input {
    kb_layout = us
    follow_mouse = 1
    touchpad {
        natural_scroll = true
    }
    sensitivity = 0 # -1.0 - 1.0
}

# =============================================
# Decoration & Blur (macOS frosted glass)
# =============================================
decoration {
    rounding = 12
    active_opacity = 0.97
    inactive_opacity = 0.90
    fullscreen_opacity = 1.0

    blur {
        enabled = true
        size = 12
        passes = 3
        ignore_opacity = true
        new_optimizations = true
        noise = 0.0117
        contrast = 0.8916
        vibrancy = 0.1696
    }

    drop_shadow = yes
    shadow_range = 12
    shadow_render_power = 3
    col.shadow = rgba(00000066)
}

# =============================================
# Animations (macOS-like)
# =============================================
bezier = overshoot, 0.05, 0.9, 0.1, 1.1
bezier = easeInOut, 0.42, 0, 0.58, 1
bezier = genie, 0.1, 0.9, 0.2, 1.05

animations {
    enabled = yes

    animation = windows,     1, 7, easeInOut, popin 80%
    animation = windowsOut,  1, 7, genie, slide
    animation = windowsMove, 1, 7, overshoot
    animation = fade,        1, 7, default
    animation = workspaces,  1, 8, default, slidefade 20%
    animation = border,      1, 10, default
}

# =============================================
# Plugins - Mission Control (Hyprspace)
# =============================================
plugin {
    hyprspace {
        overview_gappo = 60
        overview_gappi = 24
        enable_hotarea = 1
        hotarea_size = 10
        hotarea_monitor = all
    }
}

# =============================================
# Startup Applications
# =============================================
exec-once = ~/.config/mac-hypr/main.py                     # Fabric widgets (weather, dock, etc.)
exec-once = anyrun --hotkey Super+Space                    # Spotlight launcher
exec-once = swaync                                         # Notification Center
exec-once = swww-daemon                                    # Wallpaper daemon
exec-once = ~/.config/hypr/scripts/wallpaper.sh      # Live wallpaper (auto-detect image/video)

# =============================================
# Keybinds (macOS style)
# =============================================
bind = SUPER, SPACE, exec, anyrun                          # Spotlight
bind = SUPER, N, exec, swaync-client -t                    # Notification Center (toggle)
bind = SUPER, S, exec, hyprctl dispatch overview:toggle    # Mission Control
bind = SUPER, L, exec, hyprlock                            # Lock screen
bind = SUPER, Q, killactive                                # Close window
bind = SUPER, M, fullscreen, 1                             # Fullscreen toggle
bind = SUPER, T, exec, kitty                               # Terminal
bind = SUPER, E, exec, nautilus                            # File manager
bind = SUPER, C, exec, ~/.config/mac-hypr/toggle_control_center.sh  # Control Center

# =============================================
# Window Rules (transparency)
# =============================================
windowrulev2 = opacity 0.95 0.85, class:^(kitty)$
windowrulev2 = opacity 0.95 0.85, class:^(nautilus)$
windowrulev2 = float, class:^(anyrun)$
windowrulev2 = noblur, class:^(anyrun)$
blurls = mac-menu-bar
layerrule = blur, mac-menu-bar
layerrule = ignorezero, mac-menu-bar
layerrule = blur, mac-control-center
layerrule = ignorezero, mac-control-center

# =============================================
# Live Wallpaper Auto-Start Script
# Create this file: ~/.config/hypr/scripts/start_wallpaper.sh
# =============================================
# #!/bin/bash
# WALL="$HOME/Pictures/wallpaper/current"  # symlink to your current wallpaper
# if [[ $WALL == *.mp4 || $WALL == *.webm ]]; then
#     gslapper -o loop '' "$WALL"
# else
#     swww img "$WALL" --transition-type wipe --transition-duration 1.5
# fi